<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>交易</title>
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <script src="../static/js/jquery.js"></script>
    <script src="../static/build/flexible.js"></script>
    <script src="../static/build/flexible_css.js"></script>
    <script src="../static/js/layer.js"></script>
    <script src="../static/js/url.js"></script>
    <script src="../static/js/verify_login.js"></script>
    <style>
        html, body {background: #F5F5F5;}
        blockquote, span, button, dd, dl, dt, fieldset, form, h1, h2, h3, h4, h5, h6, hr, input, legend, li, ol, p, pre, td, textarea, label, th, ul, ol, i {padding: 0px;margin: 0px;font-family: MicrosoftYaHei;}
        li {list-style: none;}
        label, i {margin: 0;font-style: normal;font-weight: normal;}
        input::-webkit-input-placeholder {color: #999;}
        textarea::-webkit-input-placeholder {color: #999;}
        .header {position: fixed;top: 0px;left: 0px;width: 100%;height: 1.28rem;line-height: 1.28rem;text-align: center;color: #333;background: #fff;z-index: 99999;}
        .header span {font-size: .48rem;font-weight: bold;}
        .main {padding: 1.28rem 0rem 1.333333rem;}
        .nav-box {display: flex;justify-content: space-between;padding: .373333rem;}
        .nav-item {display: flex;justify-content: center;align-items: center;flex-wrap: wrap;padding: 0rem .4rem;width: 33.33%;min-height: .906667rem;font-size: .426667rem;color: #999;border: none;border-radius: .266667rem;background: transparent;}
        .nav-active {background: #2E80C5;color: #fff;box-shadow: 0rem 0rem .666667rem 0rem rgba(46, 128, 197, 0.35);}
        section {display: none;}
        .section-active {display: block;}
        .title {padding: 0rem .373333rem;display: flex;justify-content: flex-start;align-items: center;}
        .title span {height: .533333rem;line-height: .533333rem;font-size: .426667rem;color: #333;font-weight: bold;}
        .title-icon img {height: .533333rem;vertical-align: bottom;margin-right: .106667rem;}
        .table-one {margin-top: .373333rem;width: 100%;}
        .table-one thead tr:first-child th {height: 1.173333rem;text-align: center;font-size: .373333rem;color: #fff;background: #2E80C5;}
        .table-one thead tr:first-child th:first-child {border-top-left-radius: .266667rem;}
        .table-one thead tr:first-child th:last-child {border-top-right-radius: .266667rem;}
        .table-one tbody tr {background: #fff;border-bottom: 1px solid #E0E0E0;}
        .table-one tr th:first-child, .table-one tr td:first-child {padding-left: .453333rem;width: 20.8%;}
        .table-one tr th:nth-child(2), .table-one tr td:nth-child(2) {width: 24.6%;}
        .table-one tr th:nth-child(3), .table-one tr td:nth-child(3) {width: 31.5%;}
        .table-one tr th:last-child, .table-one tr td:last-child {padding-right: .453333rem;width: 23.1%;}
        .table-one tbody td {height: 1.173333rem;text-align: center;font-size: .426667rem;color: #333;}
        .table-one .sell-btn {padding: 0rem .186667rem;height: .8rem;line-height: .8rem;text-align: center;font-size: .426667rem;color: #fff;border: none;border-radius: .266667rem;background: #2E80C5;}
        .purchase-box {padding: .373333rem .373333rem 0rem;}
        .purchase {padding: 0rem .533333rem;border-radius: .266667rem;background: #fff;}
        .purchase-item {display: flex;justify-content: flex-start;align-items: center;height: 1.173333rem;}
        .purchase-item:first-child {border-bottom: 1px solid #E0E0E0;}
        .purchase-item-l {width: 28.7%;font-size: .426667rem;color: #333;}
        #purchase-choice {position: relative;height: 1.146667rem;}
        #purchase-choice .purchase-num {height: 1.146667rem;line-height: 1.146667rem;}
        .choice-list-box {position: absolute;top: 1.173333rem;left: 50%;margin-left: -1.066667rem;width: 2.133333rem;height: 0rem;overflow: hidden;transition: ease height .4s;}
        .choice-list {position: absolute;left: 0;bottom: 0;width: 100%;text-align: center;background: #fff;border-radius: .266667rem;border: 1px solid #E0E0E0;}
        .choice-item {height: .96rem;line-height: .96rem;font-size: .4rem;color: #666;}
        .purchase-item-r {display: flex;justify-content: center;align-items: center;width: 50.8%;font-size: .426667rem;color: #333;}
        .purchase-item-r span {color: #999;}
        .purchase-item-r img {margin-left: .133333rem;height: .533333rem;transition: ease transform .4s;}
        .apply-btn {padding: .373333rem .533333rem .533333rem;}
        .confirm-apply {display: block;width: 100%;height: 1.173333rem;line-height: 1.173333rem;font-size: .48rem;color: #fff;text-align: center;border: none;border-radius: .266667rem;background: #2E80C5;box-shadow: 0rem 0rem .533333rem 0rem rgba(46, 128, 197, 0.35);}
        .table-two {margin-top: .373333rem;margin-bottom: .533333rem;width: 100%;}
        .table-two thead tr:first-child th {height: 1.173333rem;text-align: center;font-size: .373333rem;color: #fff;background: #2E80C5;}
        .table-two thead tr:first-child th:first-child {border-top-left-radius: .266667rem;}
        .table-two thead tr:first-child th:last-child {border-top-right-radius: .266667rem;}
        .table-two tbody tr {background: #fff;border-bottom: 1px solid #E0E0E0;}
        .table-two tr th:first-child, .table-two tr td:first-child {width: 18.8%;}
        .table-two tr th:nth-child(2), .table-two tr td:nth-child(2) {width: 9.6%}
        .table-two tr th:nth-child(3), .table-two tr td:nth-child(3) {width: 9.7%}
        .table-two tr th:nth-child(4), .table-two tr td:nth-child(4) {width: 17.2%}
        .table-two tr th:nth-child(5), .table-two tr td:nth-child(5) {width: 15.2%}
        .table-two tr th:nth-child(6), .table-two tr td:nth-child(6) {width: 13.1%}
        .table-two tr th:last-child, .table-two tr td:last-child {width: 16.4%;}
        .table-two tbody td {height: 1.173333rem;text-align: center;font-size: .32rem;color: #333;}
        .table-two tbody td .purchase-time {font-size: .293333rem;color: #2E80C5;}
        .table-two tbody td .appeal, .cancel {display: inline-block;padding: 0rem .24rem;height: .64rem;line-height: .64rem;border-radius: .16rem;background: #2E80C5;color: #fff;font-size: .32rem;border: none;}
        .buy-list {margin-top: .4rem;padding: 0rem .373333rem;}
        .buy-item {margin-bottom: .373333rem;padding: 0rem .533333rem;border-radius: .266667rem;background: #fff;}
        .buy-item-top {display: flex;justify-content: space-between;align-items: center;height: .746667rem;border-bottom: 1px solid #E0E0E0;}
        .buy-state {font-size: .32rem;color: #666;}
        .buy-remaining-time {font-size: .32rem;color: #FF4B4B;}
        .buy-item-content {display: flex;justify-content: space-between;}
        .buy-time {height: .746667rem;line-height: .746667rem;font-size: .32rem;color: #666;}
        .buy-num {height: .426667rem;line-height: .426667rem;font-size: .32rem;color: #2E80C5;}
        .buy-item-r {padding-top: .746667rem;}
        .buy-unit-price {height: .426667rem;line-height: .426667rem;font-size: .32rem;color: #2E80C5;}
        .buy-item-bottom {display: flex;justify-content: space-between;padding: .32rem 0rem;}
        .buy-item-bottom > div {display: flex;justify-content: flex-start;}
        .buy-item-bottom button, .buy-item-bottom a {padding: 0rem .266667rem;height: .64rem;line-height: .64rem;font-size: .32rem;color: #fff;text-align: center;border: none;border-radius: .266667rem;background: #2E80C5;}
        .confirm-payment {margin-left: .266667rem;}
        .table-three {margin-top: .373333rem;margin-bottom: .533333rem;width: 100%;}
        .table-three thead tr:first-child th {height: 1.173333rem;text-align: center;font-size: .373333rem;color: #fff;background: #2E80C5;}
        .table-three thead tr:first-child th:first-child {border-top-left-radius: .266667rem;}
        .table-three thead tr:first-child th:last-child {border-top-right-radius: .266667rem;}
        .table-three tbody tr {background: #fff;border-bottom: 1px solid #E0E0E0;}
        .table-three tr th:first-child, .table-three tr td:first-child {width: 18.8%;}
        .table-three tr th:nth-child(2), .table-three tr td:nth-child(2) {width: 9.6%}
        .table-three tr th:nth-child(3), .table-three tr td:nth-child(3) {width: 9.7%}
        .table-three tr th:nth-child(4), .table-three tr td:nth-child(4) {width: 17.2%}
        .table-three tr th:nth-child(5), .table-three tr td:nth-child(5) {width: 15.2%}
        .table-three tr th:nth-child(6), .table-three tr td:nth-child(6) {width: 13.1%}
        .table-three tr th:last-child, .table-three tr td:last-child {width: 16.4%;}
        .table-three tbody td {height: 1.173333rem;text-align: center;font-size: .32rem;color: #333;}
        .table-three tbody td .purchase-time {font-size: .293333rem;color: #2E80C5;}
        .sell-list {margin-top: .4rem;padding: 0rem .373333rem;}
        .sell-item {margin-bottom: .373333rem;padding: 0rem .533333rem .32rem;border-radius: .266667rem;background: #fff;}
        .sell-item-top {display: flex;justify-content: space-between;align-items: center;height: .746667rem;border-bottom: 1px solid #E0E0E0;}
        .sell-state {font-size: .32rem;color: #666;}
        .sell-remaining-time {font-size: .32rem;color: #FF4B4B;}
        .sell-item-content {display: flex;justify-content: space-between;}
        .sell-time {height: .746667rem;line-height: .746667rem;font-size: .32rem;color: #666;}
        .sell-num {height: .426667rem;line-height: .426667rem;font-size: .32rem;color: #2E80C5;}
        .sell-item-r {padding-top: .746667rem;}
        .sell-unit-price {height: .426667rem;line-height: .426667rem;font-size: .32rem;color: #2E80C5;}
        .sell-item-bottom {display: flex;justify-content: space-between;padding: .32rem 0rem 0rem;}
        .sell-item-bottom {display: flex;justify-content: flex-end;}
        .sell-item-bottom button, .sell-item-bottom a {padding: 0rem .266667rem;height: .64rem;line-height: .64rem;font-size: .32rem;color: #fff;text-align: center;border: none;border-radius: .266667rem;background: #2E80C5;}
        .confirm-payment-btn {margin-left: .266667rem;}
        .footer {position: fixed;bottom: 0;left: 0;display: flex;justify-content: space-between;padding-top: .16rem;width: 100%;height: 1.333333rem;background: #fff;border-top: 1px solid #E0E0E0;}
        .footer-nav {width: 20%;display: flex;justify-content: center;}
        .footer-icon {text-align: center;}
        .footer-icon img {height: .533333rem;vertical-align: bottom;}
        .footer-name {padding-top: .08rem;font-size: .32rem;color: #999;text-align: center;}
        .footer-active .footer-name {color: #2E80C5;}
        .apply-popup-bg {position: fixed;top: 0;left: 0;z-index: 999999;width: 100%;height: 100%;background: rgba(0, 0, 0, .35);display: none;}
        .apply-popup-box {display: flex;justify-content: center;align-items: center;width: 100%;height: 100%;opacity: 0;transition: ease opacity .4s;}
        .apply-popup-content {width: 72.3%;border-radius: .4rem;background: rgba(255, 255, 255, .98);overflow: hidden;transform: scale(1.2);transition: ease transform .4s;}
        .apply-popup-tip {height: 2.56rem;display: flex;justify-content: center;align-items: center;font-size: .48rem;color: #333;border-bottom: 1px solid #E0E0E0;}
        .apply-popup-btn {display: block;width: 100%;height: 1.2rem;line-height: 1.2rem;text-align: center;font-size: .48rem;color: #2E80C5;border: none;background: transparent;}
        .sell-popup-bg {position: fixed;top: 0;left: 0;z-index: 999999;width: 100%;height: 100%;background: rgba(0, 0, 0, .35);display: none;}
        .sell-popup-box {position: absolute;top: -100%;left: 0;display: flex;justify-content: center;align-items: center;width: 100%;height: 100%;transition: ease top .4s;}
        .sell-popup-content {width: 72.3%;border-radius: .4rem;background: rgba(255, 255, 255, .98);overflow: hidden;}
        .sell-popup-top {padding: .533333rem;border-bottom: 1px solid #E0E0E0;}
        .sell-question {font-size: .48rem;color: #333;text-align: center;font-weight: bold;}
        .sell-popup-tip {margin-top: .08rem;font-size: .346667rem;color: #666;text-align: center;}
        .sell-popup-btn {display: flex;justify-content: space-between;width: 100%;}
        .sell-popup-btn button {width: 50%;height: 1.2rem;line-height: 1.2rem;text-align: center;font-size: .48rem;color: #2E80C5;border: none;background: transparent;}
        .sell-popup-btn .sell-popup-confirm {border-left: 1px solid #E0E0E0;font-weight: bold;}
        .psw-box {position: absolute;top: -100%;left: 0;display: flex;justify-content: center;align-items: center;width: 100%;height: 100%;transition: ease top .4s;}
        .psw-content {width: 72.3%;border-radius: .4rem;background: rgba(255, 255, 255, .98);overflow: hidden;}
        .psw-top {padding: .533333rem;}
        .psw-tip {font-size: .426667rem;color: #333;font-weight: bold;text-align: center;}
        .psw-tip-blue {margin-top: .08rem;font-size: .346667rem;color: #2E80C5;text-align: center;}
        .psw-input {padding: .4rem .4rem .32rem;border-bottom: 1px solid #E0E0E0;}
        .psw-input-item > input {width: 100%;height: .8rem;padding-left: .133333rem;border: 1px solid #BFBFBF;}
        .psw-input-item:first-child > input {border-bottom: none;}
        #second_psw {border-bottom: none;}
        .psw-btn {display: flex;justify-content: space-between;width: 100%;}
        .psw-btn button {width: 50%;height: 1.2rem;line-height: 1.2rem;text-align: center;font-size: .48rem;color: #2E80C5;border: none;background: transparent;}
        .psw-btn .psw-confirm {border-left: 1px solid #E0E0E0;font-weight: bold;}
        .nav-one, .nav-one-content {display: flex;justify-content: center;align-items: center;}
        .nav-one {margin: .4rem 0rem;display: none;}
        .nav-one-content > div, .nav-one-first, .nav-one-last, .nav-one-prev, .nav-one-next {min-width: .88rem;height: .88rem;line-height: .88rem;background: #ccc;text-align: center;font-size: .4rem;color: #fff;border-right: 1px solid #fff;}
        .nav-one-prev, .nav-one-next {font-family: "黑体";}
        .nav-one-first, .nav-one-last {width: 1.44rem;}
        .nav-one-last {border: none;}
        .nav-one-content .nav-one-active {background: #2E80C5;}
        .nav-two, .nav-two-content {display: flex;justify-content: center;align-items: center;}
        .nav-two {margin: .4rem 0rem;display: none;}
        .nav-two-content > div, .nav-two-first, .nav-two-last, .nav-two-prev, .nav-two-next {min-width: .88rem;height: .88rem;line-height: .88rem;background: #ccc;text-align: center;font-size: .4rem;color: #fff;border-right: 1px solid #fff;}
        .nav-two-prev, .nav-two-next {font-family: "黑体";}
        .nav-two-first, .nav-two-last {width: 1.44rem;}
        .nav-two-last {border: none;}
        .nav-two-content .nav-two-active {background: #2E80C5;}
        .nav-three, .nav-three-content {display: flex;justify-content: center;align-items: center;}
        .nav-three {margin: .4rem 0rem;display: none;}
        .nav-three-content > div, .nav-three-first, .nav-three-last, .nav-three-prev, .nav-three-next {min-width: .88rem;height: .88rem;line-height: .88rem;background: #ccc;text-align: center;font-size: .4rem;color: #fff;border-right: 1px solid #fff;}
        .nav-three-prev, .nav-three-next {font-family: "黑体";}
        .nav-three-first, .nav-three-last {width: 1.44rem;}
        .nav-three-last {border: none;}
        .nav-three-content .nav-three-active {background: #2E80C5;}
        .nav-four, .nav-four-content {display: flex;justify-content: center;align-items: center;}
        .nav-four {margin: .4rem 0rem;display: none;}
        .nav-four-content > div, .nav-four-first, .nav-four-last, .nav-four-prev, .nav-four-next {min-width: .88rem;height: .88rem;line-height: .88rem;background: #ccc;text-align: center;font-size: .4rem;color: #fff;border-right: 1px solid #fff;}
        .nav-four-prev, .nav-four-next {font-family: "黑体";}
        .nav-four-first, .nav-four-last {width: 1.44rem;}
        .nav-four-last {border: none;}
        .nav-four-content .nav-four-active {background: #2E80C5;}
        .nav-five, .nav-five-content {display: flex;justify-content: center;align-items: center;}
        .nav-five {margin: .4rem 0rem;display: none;}
        .nav-five-content > div, .nav-five-first, .nav-five-last, .nav-five-prev, .nav-five-next {min-width: .88rem;height: .88rem;line-height: .88rem;background: #ccc;text-align: center;font-size: .4rem;color: #fff;border-right: 1px solid #fff;}
        .nav-five-prev, .nav-five-next {font-family: "黑体";}
        .nav-five-first, .nav-five-last {width: 1.44rem;}
        .nav-five-last {border: none;}
        .nav-five-content .nav-five-active {background: #2E80C5;}
        .cancel-popup-bg {position: fixed;top: 0;left: 0;z-index: 999999;width: 100%;height: 100%;background: rgba(0, 0, 0, .35);display: none;}
        .cancel-popup-box {position: absolute;top: -100%;left: 0;display: flex;justify-content: center;align-items: center;width: 100%;height: 100%;transition: ease top .4s;}
        .cancel-popup-content {width: 72.3%;border-radius: .4rem;background: rgba(255, 255, 255, .98);overflow: hidden;}
        .cancel-popup-top {padding: .533333rem;border-bottom: 1px solid #E0E0E0;}
        .cancel-question {font-size: .48rem;color: #333;text-align: center;font-weight: bold;}
        .cancel-popup-tip {margin-top: .08rem;font-size: .346667rem;color: #666;text-align: center;}
        .cancel-popup-btn {display: flex;justify-content: space-between;width: 100%;}
        .cancel-popup-btn button {width: 50%;height: 1.2rem;line-height: 1.2rem;text-align: center;font-size: .48rem;color: #2E80C5;border: none;background: transparent;}
        .cancel-popup-btn .cancel-popup-confirm {border-left: 1px solid #E0E0E0;font-weight: bold;}
    </style>
</head>
<body>
    <header class="header">
        <span>交易</span>
    </header>
    <main class="main">
        <nav class="nav-box">
            <button class="nav-item nav-active">交易大厅</button>
            <button class="nav-item">买入ZCF</button>
            <button class="nav-item">卖出ZCF</button>
        </nav>
        <section class="section-one section-active">
            <div class="title">
                <span class="title-icon"><img src="../static/images/home_title_icon@2x.png" alt=""></span>
                <span>交易大厅-等待买入列表</span>
            </div>
            <table class="table-one">
                <thead>
                    <tr>
                        <th>数量</th>
                        <th>单价/人民币</th>
                        <th>合计金额/人民币</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody class="tbody-one">
                    <!-- <tr>
                        <td>3</td>
                        <td>2.72$</td>
                        <td>8.16$</td>
                        <td><button class="sell-btn">卖给TA</button></td>
                    </tr> -->
                </tbody>
            </table>
            <div class="nav-one">
                <div class="nav-one-first">首页</div>
                <div class="nav-one-prev"><</div>
                <div class="nav-one-content"></div>
                <div class="nav-one-next">></div>
                <div class="nav-one-last">尾页</div>
            </div>
        </section>
        <section class="section-two">
            <div class="title">
                <span class="title-icon"><img src="../static/images/home_title_icon@2x.png" alt=""></span>
                <span>申请买入</span>
            </div>
            <div class="purchase-box">
                <div class="purchase">
                    <div class="purchase-item">
                        <div class="purchase-item-l">申请数量</div>
                        <div class="purchase-item-r" id="purchase-choice">
                            <span class="purchase-num" data="0">请选择数量</span>
                            <img src="../static/images/arrow_under_icon@2x.png" alt="" class="select-icon">
                            <div class="choice-list-box">
                                <div class="choice-list">
                                    <div class="choice-item" data="5">5</div>
                                    <div class="choice-item" data="10">10</div>
                                    <div class="choice-item" data="20">20</div>
                                    <div class="choice-item" data="50">50</div>
                                    <div class="choice-item" data="100">100</div>
                                    <div class="choice-item" data="150">150</div>
                                    <div class="choice-item" data="200">200</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="purchase-item">
                        <div class="purchase-item-l">单价</div>
                        <div class="purchase-item-r" id="unit-price"></div>
                    </div>
                </div>
                <div class="apply-btn">
                    <button class="confirm-apply">确认申请</button>
                </div>
            </div>
            <div class="title">
                <span class="title-icon"><img src="../static/images/home_title_icon@2x.png" alt=""></span>
                <span>我的买入列表</span>
            </div>
            <table class="table-two">
                <thead>
                    <tr>
                        <th>时间</th>
                        <th>数量</th>
                        <th>单价</th>
                        <th>合计金额</th>
                        <th>状态</th>
                        <th>交易</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody class="tbody-two">
                    <!-- <tr>
                        <td><span class="purchase-time">2018.07.03</span></td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>已配对</td>
                        <td>未确认</td>
                        <td>不可操作</td>
                    </tr> -->
                </tbody>
            </table>
            <div class="nav-two">
                <div class="nav-two-first">首页</div>
                <div class="nav-two-prev"><</div>
                <div class="nav-two-content"></div>
                <div class="nav-two-next">></div>
                <div class="nav-two-last">尾页</div>
            </div>
            <div class="title">
                <span class="title-icon"><img src="../static/images/home_title_icon@2x.png" alt=""></span>
                <span>我的买入交易列表</span>
            </div>
            <div class="buy-list">
                <!-- <div class="buy-item">
                    <div class="buy-item-top">
                        <div class="buy-state">等待打款</div>
                        <div class="buy-remaining-time">打款剩余时间：2小时</div>
                    </div>
                    <div class="buy-item-content">
                        <div class="buy-item-l">
                            <div class="buy-time">2019-01-03 12：06：59</div>
                            <div class="buy-num">数量：3</div>
                        </div>
                        <div class="buy-item-r">
                            <div class="buy-unit-price">单价：2.7300$</div>
                        </div>
                    </div>
                    <div class="buy-item-bottom">
                        <div>
                            <button class="cancel-buy-btn">取消交易</button>
                        </div>
                        <div>
                            <a class="details-btn" href="order_details.html">详细信息</a>
                            <a class="confirm-payment" href="confirm_payment.html">确认已付款</a>
                        </div>
                    </div>
                </div> -->
            </div>
            <div class="nav-three">
                <div class="nav-three-first">首页</div>
                <div class="nav-three-prev"><</div>
                <div class="nav-three-content"></div>
                <div class="nav-three-next">></div>
                <div class="nav-three-last">尾页</div>
            </div>
        </section>
        <section class="section-three">
            <div class="title">
                <span class="title-icon"><img src="../static/images/home_title_icon@2x.png" alt=""></span>
                <span>我的出售列表</span>
            </div>
            <table class="table-three">
                <thead>
                    <tr>
                        <th>时间</th>
                        <th>数量</th>
                        <th>单价</th>
                        <th>合计金额</th>
                        <th>状态</th>
                        <th>交易</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody class="tbody-three">
                    <!-- <tr>
                        <td><span class="purchase-time">2018.07.03</span></td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>已配对</td>
                        <td>未确认</td>
                        <td>不可操作</td>
                    </tr> -->
                </tbody>
            </table>
            <div class="nav-four">
                <div class="nav-four-first">首页</div>
                <div class="nav-four-prev"><</div>
                <div class="nav-four-content"></div>
                <div class="nav-four-next">></div>
                <div class="nav-four-last">尾页</div>
            </div>
            <div class="title">
                <span class="title-icon"><img src="../static/images/home_title_icon@2x.png" alt=""></span>
                <span>我的出售交易列表</span>
            </div>
            <div class="sell-list">
                <!-- <div class="sell-item">
                    <div class="sell-item-top">
                        <div class="sell-state">等待打款</div>
                        <div class="sell-remaining-time">打款剩余时间：2小时</div>
                    </div>
                    <div class="sell-item-content">
                        <div class="sell-item-l">
                            <div class="sell-time">2019-01-03 12：06：59</div>
                            <div class="sell-num">数量：3</div>
                        </div>
                        <div class="sell-item-r">
                            <div class="sell-unit-price">单价：2.7300$</div>
                        </div>
                    </div>
                    <div class="sell-item-bottom">
                        <a class="details-btn" href="order_details.html">详细信息</a>
                        <a class="confirm-payment-btn" href="sell_order_details.html">确认已打款</a>
                    </div>
                </div>
                <div class="sell-item">
                    <div class="sell-item-top">
                        <div class="sell-state">等待打款</div>
                        <div class="sell-remaining-time">打款剩余时间：2小时</div>
                    </div>
                    <div class="sell-item-content">
                        <div class="sell-item-l">
                            <div class="sell-time">2019-01-03 12：06：59</div>
                            <div class="sell-num">数量：3</div>
                        </div>
                        <div class="sell-item-r">
                            <div class="sell-unit-price">单价：2.7300$</div>
                        </div>
                    </div>
                </div> -->
            </div>
            <div class="nav-five">
                <div class="nav-five-first">首页</div>
                <div class="nav-five-prev"><</div>
                <div class="nav-five-content"></div>
                <div class="nav-five-next">></div>
                <div class="nav-five-last">尾页</div>
            </div>
        </section>
    </main>
    <footer class="footer">
        <div class="footer-nav" onclick="window.location.href='index.html'">
            <div>
                <div class="footer-icon">
                    <img src="../static/images/label_home_default_icon@2x.png" alt="">
                </div>
                <div class="footer-name">首页</div>
            </div>
        </div>
        <div class="footer-nav" onclick="window.location.href='mining_machine.html'">
            <div>
                <div class="footer-icon">
                    <img src="../static/images/label_machine_default_icon@2x.png" alt="">
                </div>
                <div class="footer-name">农场</div>
            </div>
        </div>
        <div class="footer-nav" onclick="window.location.href='team.html'">
            <div>
                <div class="footer-icon">
                    <img src="../static/images/label_team_default_icon@2x.png" alt="">
                </div>
                <div class="footer-name">团队</div>
            </div>
        </div>
        <div class="footer-nav footer-active">
            <div>
                <div class="footer-icon">
                    <img src="../static/images/label_cross_Selected_icon@2x.png" alt="">
                </div>
                <div class="footer-name">交易</div>
            </div>
        </div>
        <div class="footer-nav" onclick="window.location.href='center.html'">
            <div>
                <div class="footer-icon">
                    <img src="../static/images/label_mine_default_icon@2x.png" alt="">
                </div>
                <div class="footer-name">我的</div>
            </div>
        </div>
    </footer>
    <div class="apply-popup-bg">
        <div class="apply-popup-box">
            <div class="apply-popup-content">
                <div class="apply-popup-tip">申请成功!</div>
                <button class="apply-popup-btn">确定</button>
            </div>
        </div>
    </div>
    <div class="sell-popup-bg">
        <div class="sell-popup-box">
            <div class="sell-popup-content">
                <div class="sell-popup-top">
                    <div class="sell-question">确认出售吗？</div>
                    <div class="sell-popup-tip"></div>
                </div>
                <div class="sell-popup-btn">
                    <button class="sell-popup-cancel">取消</button>
                    <button class="sell-popup-confirm">确定</button>
                </div>
            </div>
        </div>
        <div class="psw-box">
            <div class="psw-content">
                <div class="psw-top">
                    <div class="psw-tip">请输入二级密码与身份证号</div>
                    <!-- <div class="psw-tip-blue">输入后重新点击 (卖给TA)</div> -->
                </div>
                <div class="psw-input">
                    <div class="psw-input-item"><input type="password" id="second-psw" placeholder="二级密码"></div>
                    <div class="psw-input-item"><input type="text" id="identity-num" placeholder="身份证号"></div>
                </div>
                <div class="psw-btn">
                    <button class="psw-cancel">取消</button>
                    <button class="psw-confirm">确定</button>
                </div>
            </div>
        </div>
    </div>
    <div class="cancel-popup-bg">
        <div class="cancel-popup-box">
            <div class="cancel-popup-content">
                <div class="cancel-popup-top">
                    <div class="cancel-question">确定取消吗?</div>
                </div>
                <div class="cancel-popup-btn">
                    <button class="cancel-popup-cancel">取消</button>
                    <button class="cancel-popup-confirm">确定</button>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    var navItem = document.querySelectorAll('.nav-item');
    var section = document.querySelectorAll('section');
    var purchaseChoice = document.querySelector('#purchase-choice');
    var purchaseNum = document.querySelector('.purchase-num');
    var selectIcon = document.querySelector('.select-icon');
    var choiceListBox = document.querySelector('.choice-list-box');
    var choiceList = document.querySelector('.choice-list');
    var choiceItem = document.querySelectorAll('.choice-item');
    var unitPrice = document.querySelector('#unit-price');
    var confirmApply = document.querySelector('.confirm-apply');
    var applyPopupBg = document.querySelector('.apply-popup-bg');
    var applyPopupBox = document.querySelector('.apply-popup-box');
    var applyPopupContent = document.querySelector('.apply-popup-content');
    var applyPopupTip = document.querySelector('.apply-popup-tip');
    var applyPopupBtn = document.querySelector('.apply-popup-btn');
    var sellPopupBg = document.querySelector('.sell-popup-bg');
    var sellPopupBox = document.querySelector('.sell-popup-box');
    var sellPopupTip = document.querySelector('.sell-popup-tip');
    var sellPopupCancel = document.querySelector('.sell-popup-cancel');
    var sellPopupConfirm = document.querySelector('.sell-popup-confirm');
    var pswBox = document.querySelector('.psw-box');
    var pswCancel = document.querySelector('.psw-cancel');
    var pswConfirm = document.querySelector('.psw-confirm');
    var buyList = document.querySelector('.buy-list');
    var sellList = document.querySelector('.sell-list');
    var tbodyOne = document.querySelector('.tbody-one');
    var tbodyTwo = document.querySelector('.tbody-two');
    var tbodyThree = document.querySelector('.tbody-three');
    var secondPsw = document.querySelector('#second-psw');
    var identityNum = document.querySelector('#identity-num');
    var navOne = document.querySelector('.nav-one');
    var navOneFirst = document.querySelector('.nav-one-first');
    var navOneLast = document.querySelector('.nav-one-last');
    var navOnePrev = document.querySelector('.nav-one-prev');
    var navOneNext = document.querySelector('.nav-one-next');
    var navOneContent = document.querySelector('.nav-one-content');
    var navTwo = document.querySelector('.nav-two');
    var navTwoFirst = document.querySelector('.nav-two-first');
    var navTwoLast = document.querySelector('.nav-two-last');
    var navTwoPrev = document.querySelector('.nav-two-prev');
    var navTwoNext = document.querySelector('.nav-two-next');
    var navTwoContent = document.querySelector('.nav-two-content');
    var navThree = document.querySelector('.nav-three');
    var navThreeFirst = document.querySelector('.nav-three-first');
    var navThreeLast = document.querySelector('.nav-three-last');
    var navThreePrev = document.querySelector('.nav-three-prev');
    var navThreeNext = document.querySelector('.nav-three-next');
    var navThreeContent = document.querySelector('.nav-three-content');
    var navFour = document.querySelector('.nav-four');
    var navFourFirst = document.querySelector('.nav-four-first');
    var navFourLast = document.querySelector('.nav-four-last');
    var navFourPrev = document.querySelector('.nav-four-prev');
    var navFourNext = document.querySelector('.nav-four-next');
    var navFourContent = document.querySelector('.nav-four-content');
    var navFive = document.querySelector('.nav-five');
    var navFiveFirst = document.querySelector('.nav-five-first');
    var navFiveLast = document.querySelector('.nav-five-last');
    var navFivePrev = document.querySelector('.nav-five-prev');
    var navFiveNext = document.querySelector('.nav-five-next');
    var navFiveContent = document.querySelector('.nav-five-content');
    var cancelPopupBg = document.querySelector('.cancel-popup-bg');
    var cancelPopupBox = document.querySelector('.cancel-popup-box');
    var cancelPopupTip = document.querySelector('.cancel-popup-tip');
    var cancelPopupCancel = document.querySelector('.cancel-popup-cancel');
    var cancelPopupConfirm = document.querySelector('.cancel-popup-confirm');
    var purchaseUnitPrice;
    var hallPage = 1;
    var purchasePage = 1;
    var buyListPage = 1;
    var sellPage = 1;
    var sellListPage = 1;
    var limit = 10;
    var limitTransfer = 50;
    var limitHalf = 3;
    // 交易大厅
    $.ajax({
        url: j_url + "/index/shop/marketList",
        type: "POST",
        data: {
            page: 1,
            limit: 50
        },
        dataType: "json",
        async: true,
        crossDomain: true,
        success: function(res) {
            console.log(res);
            if (res.code == 0 && res.info) {
                var info = res.info;
                var count = res.count;
                // 封装一个添加子元素的方法，后面要多次用到
                for (var i = 0; i < info.length; i++) {
                    var item = info[i];
                    var html = '';
                    html+='<tr>';
                        html+='<td>'+Number(item.num)+'</td>';
                        html+='<td>'+Number(item.price)+'</td>';
                        html+='<td>'+Number(item.total)+'</td>';
                        html+='<td><button class="sell-btn" data-id="'+item.id+'" data-num="'+Number(item.num)+'" data-total="'+Number(item.total)+'" data-service="'+Number(item.ratio)+'">卖给TA</button></td>';
                    html+='</tr>';
                    tbodyOne.innerHTML += html;
                };
                var sellBtn = document.querySelectorAll('.sell-btn');
                var sellBtnLen = sellBtn.length;
                for (var i = 0; i < sellBtnLen; i++) {
                    sellBtn[i].addEventListener('click', function() {
                        sellPopupTip.innerHTML = this.getAttribute('data-service') == '0' ? '本次出售'+this.getAttribute('data-num')+'个可售资产，可收'+this.getAttribute('data-total')+'人民币' : '本次出售'+this.getAttribute('data-num')+'个可售资产，可收'+this.getAttribute('data-total')+'人民币，需要'+this.getAttribute('data-service') * 100+'%手续费出售10扣'+ (10 + 10 * this.getAttribute('data-service'));
                        sellPopupConfirm.setAttribute('data-id', this.getAttribute('data-id'));
                        sellPopupBg.style.display = 'block';
                        setTimeout(function() {
                            sellPopupBox.style.top = '0%';
                        }, 10);
                    });
                };
            };
        }
    });
    /*$.ajax({
        url: j_url + "/index/shop/marketList",
        type: "POST",
        data: {
            page: 1,
            limit: 50
        },
        dataType: "json",
        async: true,
        crossDomain: true,
        success: function(res) {
            console.log(res);
            if (res.code == 0 && res.info) {
                var info = res.info;
                var count = res.count;
                // 封装一个添加子元素的方法，后面要多次用到
                function addChild(info) {
                    for (var i = 0; i < info.length; i++) {
                        var item = info[i];
                        var html = '';
                        html+='<tr>';
                            html+='<td>'+Number(item.num)+'</td>';
                            html+='<td>'+Number(item.price)+'</td>';
                            html+='<td>'+Number(item.total)+'</td>';
                            html+='<td><button class="sell-btn" data-id="'+item.id+'" data-num="'+Number(item.num)+'" data-total="'+Number(item.total)+'" data-service="'+Number(item.ratio)+'">卖给TA</button></td>';
                        html+='</tr>';
                        tbodyOne.innerHTML += html;
                    };
                    var sellBtn = document.querySelectorAll('.sell-btn');
                    sellBtn.forEach(function(item) {
                        item.addEventListener('click', function() {
                            sellPopupTip.innerHTML = item.getAttribute('data-service') == '0' ? '本次出售'+item.getAttribute('data-num')+'个可售资产，可收'+item.getAttribute('data-total')+'人民币' : '本次出售'+item.getAttribute('data-num')+'个可售资产，可收'+item.getAttribute('data-total')+'人民币，需要'+item.getAttribute('data-service') * 100+'%手续费出售10扣'+10 + 10 * item.getAttribute('data-service');
                            sellPopupConfirm.setAttribute('data-id', item.getAttribute('data-id'));
                            sellPopupBg.style.display = 'block';
                            setTimeout(function() {
                                sellPopupBox.style.top = '0%';
                            }, 10);
                        });
                    });
                };
                function initialization(arr) {
                    arr.forEach(function(eles, index) {
                        eles.classList.remove('nav-one-active');
                        eles.setAttribute('data', '0');
                        eles.setAttribute('data-index', index);
                    });
                };
                // 封装一个请求并添加子元素的方法，后面要多次用到
                function request(hallPage, limit) {
                    $.ajax({
                        url: j_url + "/index/shop/marketList",
                        type: "POST",
                        data: {
                            page: hallPage,
                            limit: limitTransfer
                        },
                        dataType: "json",
                        async: true,
                        crossDomain: true,
                        success: function(res) {
                            console.log(res);
                            if (res.code == 0 && res.info) {
                                info = res.info;
                                tbodyOne.innerHTML = '';
                                info.forEach(function(item) {
                                    // tbodyOne.innerHTML += ``;
                                    var html='';
                                    html+='<tr>';
                                        html+='<td>'+Number(item.num)+'</td>';
                                        html+='<td>'+Number(item.price)+'</td>';
                                        html+='<td>'+Number(item.total)+'</td>';
                                        html+='<td><button class="sell-btn" data-id="'+item.id+'" data-num="'+Number(item.num)+'" data-total="'+Number(item.total)+'" data-service="'+Number(item.ratio)+'">卖给TA</button></td>';
                                    html+='</tr>';
                                    tbodyOne.innerHTML += html;
                                });
                                var sellBtn = document.querySelectorAll('.sell-btn');
                                sellBtn.forEach(function(item) {
                                    item.addEventListener('click', function() {
                                        sellPopupTip.innerHTML = item.getAttribute('data-service') == '0' ? '本次出售'+item.getAttribute('data-num')+'个可售资产，可收'+item.getAttribute('data-total')+'人民币' : '本次出售'+item.getAttribute('data-num')+'个可售资产，可收'+item.getAttribute('data-total')+'人民币，需要'+item.getAttribute('data-service') * 100+'%手续费出售10扣'+10 + 10 * item.getAttribute('data-service');
                                        sellPopupConfirm.setAttribute('data-id', item.getAttribute('data-id'));
                                        sellPopupBg.style.display = 'block';
                                        setTimeout(function() {
                                            sellPopupBox.style.top = '0%';
                                        }, 10);
                                    });
                                });
                            };
                        }
                    });
                };
                if (count > limitTransfer) {
                    navOne.style.display = 'flex';
                    var pageNum = Math.ceil(count / limitTransfer);
                    addChild(info);
                    var pageAll = pageNum <= 5 ? pageNum : 5;
                    for (var i = 1; i <= pageAll; i++) {
                        navOneContent.innerHTML += '<div class="nav-one-item" data="0">'+i+'</div>';
                    };
                    navOneContent.children[0].classList.add('nav-one-active');
                    var navOneItem = document.querySelectorAll('.nav-one-item');
                    navOneItem.forEach(function(ele) {
                        ele.addEventListener('click', function() {
                            // data为0时，表示没有重复点击当前页面
                            if (ele.getAttribute('data') == 0) {
                                initialization(navOneItem);
                                ele.classList.add('nav-one-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                ele.setAttribute('data', '1');
                                hallPage = ele.innerHTML;
                                request(hallPage, limitTransfer);
                            }
                        });
                    });
                    navOneFirst.addEventListener('click', function() {
                        initialization(navOneItem);
                        navOneItem.forEach(function(eles, index) {
                            eles.innerHTML = index + 1;
                        });
                        navOneItem[0].classList.add('nav-one-active');
                        // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                        navOneItem[0].setAttribute('data', '1');
                        hallPage = navOneItem[0].innerHTML;
                        request(hallPage, limitTransfer);
                    });
                    navOneLast.addEventListener('click', function() {
                        initialization(navOneItem);
                        if (pageNum > 5) {
                            navOneItem.forEach(function(eles, index) {
                                eles.innerHTML = pageNum + (index - 4);
                            });
                        } else {
                            navOneItem.forEach(function(eles, index) {
                                eles.innerHTML = index + 1;
                            });
                        };
                        navOneItem[navOneItem.length - 1].classList.add('nav-one-active');
                        // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                        navOneItem[navOneItem.length - 1].setAttribute('data', '1');
                        hallPage = pageNum;
                        request(hallPage, limitTransfer);
                    });
                    navOnePrev.addEventListener('click', function() {
                        var pageActive = Number(document.querySelector('.nav-one-active').getAttribute('data-index'));
                        if (pageActive > 0) {
                            initialization(navOneItem);
                            navOneItem[pageActive - 1].classList.add('nav-one-active');
                            // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                            navOneItem[pageActive - 1].setAttribute('data', '1');
                            hallPage = navOneItem[pageActive - 1].innerHTML;
                            request(hallPage, limitTransfer);
                        } else {
                            var firstPage = Number(navOneItem[0].innerHTML);
                            if (firstPage > 1) {
                                initialization(navOneItem);
                                navOneItem.forEach(function(eles, index) {
                                    eles.innerHTML = index + firstPage - 1;
                                });
                                navOneItem[0].classList.add('nav-one-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                navOneItem[0].setAttribute('data', '1');
                                hallPage = navOneItem[0].innerHTML;
                                request(hallPage, limitTransfer);
                            }
                        };
                    });
                    navOneNext.addEventListener('click', function() {
                        var pageActive = Number(document.querySelector('.nav-one-active').getAttribute('data-index'));
                        if (pageActive < (pageAll - 1)) {
                            initialization(navOneItem);
                            navOneItem[pageActive + 1].classList.add('nav-one-active');
                            // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                            navOneItem[pageActive + 1].setAttribute('data', '1');
                            hallPage = navOneItem[pageActive + 1].innerHTML;
                            request(hallPage, limitTransfer);
                        } else {
                            var lastPage = Number(navOneItem[navOneItem.length - 1].innerHTML);
                            if (lastPage < pageNum) {
                                initialization(navOneItem);
                                navOneItem.forEach(function(eles, index) {
                                    eles.innerHTML = index + lastPage - 3;
                                });
                                navOneItem[navOneItem.length - 1].classList.add('nav-one-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                navOneItem[navOneItem.length - 1].setAttribute('data', '1');
                                hallPage = navOneItem[navOneItem.length - 1].innerHTML;
                                request(hallPage, limitTransfer);
                            }
                        };
                    });
                } else {
                    addChild(info);
                };
            };
        }
    });*/
    // "申请买入"单价
    $.ajax({
        url: j_url + "/index/mywallet/getNewHashRatio",
        type: "POST",
        data: {},
        dataType: "json",
        async: true,
        crossDomain: true,
        success: function(res) {
            console.log(res);
            if (res.code == 0 && res.info) {
                unitPrice.innerHTML = res.info.ratio;
                purchaseUnitPrice = res.info.ratio;
            };
        }
    });
    // 我的买入列表
    $.ajax({
        url: j_url + "/index/shop/buyInfoList",
        type: "POST",
        data: {
            page: purchasePage,
            limit: limit
        },
        dataType: "json",
        async: true,
        crossDomain: true,
        success: function(res) {
            console.log(res);
            console.log(123);
            if (res.code == 0 && res.info) {
                var info = res.info;
                var count = res.count;
                // 封装一个添加子元素的方法，后面要多次用到
                function addChildBuy(info) {
                    info.forEach(function(item) {
                        var status;
                        var transaction;
                        var operation;
                        switch (item.status) {
                            case 1:
                                status = '等待匹配';
                                transaction = '未确定';
                                operation = '<button class="cancel" data="'+item.id+'">取消</button>';
                                break;
                            case 2:
                                status = '等待付款';
                                transaction = '未确定';
                                operation = '不可操作';
                                break;
                            case 3:
                                status = '等待收款';
                                transaction = '未确定';
                                operation = '<a class="appeal" href="appeal.html?data-id='+item.id+'">申诉</a>';
                                break;
                            case 4:
                                status = '交易完成';
                                transaction = '完成';
                                operation = '不可操作';
                                break;
                            case 5:
                                status = '交易失败';
                                transaction = '未确定';
                                operation = '不可操作';
                                break;
                            case 6:
                                status = '取消匹配';
                                transaction = '未确定';
                                operation = '不可操作';
                                break;
                        }
                        var html = '';
                        html+='<tr>';
                            html+='<td><span class="purchase-time">'+item.create_time+'</span></td>';
                            html+='<td>'+Number(item.num)+'</td>';
                            html+='<td>'+Number(item.price)+'</td>';
                            html+='<td>'+Number(item.total)+'</td>';
                            html+='<td>'+status+'</td>';
                            html+='<td>'+transaction+'</td>';
                            html+='<td>'+operation+'</td>';
                        html+='</tr>';
                        tbodyTwo.innerHTML += html;
                    });
                    if (document.querySelectorAll('.cancel')) {
                        var $cancel = document.querySelectorAll('.cancel');
                        var cancelLen = $cancel.length;
                        for (var i = 0; i < cancelLen; i++) {
                            $cancel[i].addEventListener('click', function (){
                                cancelPopupBg.style.display = 'block';
                                setTimeout(function() {
                                    cancelPopupBox.style.top = '0%';
                                }, 10);
                                cancelPopupConfirm.setAttribute('data', this.getAttribute('data'));
                            })
                        }
                    }
                    /*if (document.querySelectorAll('.cancel')) {
                        var _cancel = document.querySelectorAll('.cancel');
                        
                        _cancel.forEach(function(ele) {
                            ele.addEventListener('click', function() {
                                cancelPopupBg.style.display = 'block';
                                setTimeout(function() {
                                    cancelPopupBox.style.top = '0%';
                                }, 10);
                                cancelPopupConfirm.setAttribute('data', ele.getAttribute('data'));
                            });
                        });
                    }*/
                };
                function initializationBuy(arr) {
                    arr.forEach(function(eles, index) {
                        eles.classList.remove('nav-two-active');
                        eles.setAttribute('data', '0');
                        eles.setAttribute('data-index', index);
                    });
                };
                function requestBuy(hallPage, limit) {
                    $.ajax({
                        url: j_url + "/index/shop/buyInfoList",
                        type: "POST",
                        data: {
                            page: hallPage,
                            limit: limit
                        },
                        dataType: "json",
                        async: true,
                        crossDomain: true,
                        success: function(res) {
                            console.log(res);
                            if (res.code == 0 && res.info) {
                                var info = res.info;
                                tbodyTwo.innerHTML = '';
                                info.forEach(function(item) {
                                    var status;
                                    var transaction;
                                    var operation;
                                    switch (item.status) {
                                        case 1:
                                            status = '等待匹配';
                                            transaction = '未确定';
                                            operation = '<button class="cancel" data="'+item.id+'">取消</button>';
                                            break;
                                        case 2:
                                            status = '等待付款';
                                            transaction = '未确定';
                                            operation = '不可操作';
                                            break;
                                        case 3:
                                            status = '等待收款';
                                            transaction = '未确定';
                                            operation = '<a class="appeal" href="appeal.html?data-id='+item.id+'">申诉</a>';
                                            break;
                                        case 4:
                                            status = '交易完成';
                                            transaction = '完成';
                                            operation = '不可操作';
                                            break;
                                        case 5:
                                            status = '交易失败';
                                            transaction = '未确定';
                                            operation = '不可操作';
                                            break;
                                        case 6:
                                            status = '取消匹配';
                                            transaction = '未确定';
                                            operation = '不可操作';
                                            break;
                                    }
                                    // tbodyTwo.innerHTML += ``;
                                    var html = '';
                                    html+='<tr>';
                                        html+='<td><span class="purchase-time">'+item.create_time+'</span></td>';
                                        html+='<td>'+Number(item.num)+'</td>';
                                        html+='<td>'+Number(item.price)+'</td>';
                                        html+='<td>'+Number(item.total)+'</td>';
                                        html+='<td>'+status+'</td>';
                                        html+='<td>'+transaction+'</td>';
                                        html+='<td>'+operation+'</td>';
                                    html+='</tr>';
                                    tbodyTwo.innerHTML += html;
                                });
                                if (document.querySelectorAll('.cancel')) {
                                    var $cancel = document.querySelectorAll('.cancel');
                                    var cancelLen = $cancel.length;
                                    for (var i = 0; i < cancelLen; i++) {
                                        $cancel[i].addEventListener('click', function (){
                                            cancelPopupBg.style.display = 'block';
                                            setTimeout(function() {
                                                cancelPopupBox.style.top = '0%';
                                            }, 10);
                                            cancelPopupConfirm.setAttribute('data', this.getAttribute('data'));
                                        })
                                    }
                                }
                            };
                        }
                    });
                };
                if (count > limit) {
                    navTwo.style.display = 'flex';
                    var pageNum = Math.ceil(count / limit);
                    addChildBuy(info);
                    var pageAll = pageNum <= 5 ? pageNum : 5;
                    for (var i = 1; i <= pageAll; i++) {
                        navTwoContent.innerHTML += '<div class="nav-two-item" data="0">'+i+'</div>';
                    };
                    navTwoContent.children[0].classList.add('nav-two-active');
                    var navTwoItem = document.querySelectorAll('.nav-two-item');
                    navTwoItem.forEach(function(ele) {
                        ele.addEventListener('click', function() {
                            // data为0时，表示没有重复点击当前页面
                            if (ele.getAttribute('data') == 0) {
                                initializationBuy(navTwoItem);
                                ele.classList.add('nav-two-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                ele.setAttribute('data', '1');
                                hallPage = ele.innerHTML;
                                requestBuy(hallPage, limit);
                            }
                        });
                    });
                    navTwoFirst.addEventListener('click', function() {
                        initializationBuy(navTwoItem);
                        navTwoItem.forEach(function(eles, index) {
                            eles.innerHTML = index + 1;
                        });
                        navTwoItem[0].classList.add('nav-two-active');
                        // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                        navTwoItem[0].setAttribute('data', '1');
                        hallPage = navTwoItem[0].innerHTML;
                        requestBuy(hallPage, limit);
                    });
                    navTwoLast.addEventListener('click', function() {
                        initializationBuy(navTwoItem);
                        if (pageNum > 5) {
                            navTwoItem.forEach(function(eles, index) {
                                eles.innerHTML = pageNum + (index - 4);
                            });
                        } else {
                            navTwoItem.forEach(function(eles, index) {
                                eles.innerHTML = index + 1;
                            });
                        };
                        navTwoItem[navTwoItem.length - 1].classList.add('nav-two-active');
                        // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                        navTwoItem[navTwoItem.length - 1].setAttribute('data', '1');
                        hallPage = pageNum;
                        requestBuy(hallPage, limit);
                    });
                    navTwoPrev.addEventListener('click', function() {
                        var pageActive = Number(document.querySelector('.nav-two-active').getAttribute('data-index'));
                        if (pageActive > 0) {
                            initializationBuy(navTwoItem);
                            navTwoItem[pageActive - 1].classList.add('nav-two-active');
                            // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                            navTwoItem[pageActive - 1].setAttribute('data', '1');
                            hallPage = navTwoItem[pageActive - 1].innerHTML;
                            requestBuy(hallPage, limit);
                        } else {
                            var firstPage = Number(navTwoItem[0].innerHTML);
                            if (firstPage > 1) {
                                initializationBuy(navTwoItem);
                                navTwoItem.forEach(function(eles, index) {
                                    eles.innerHTML = index + firstPage - 1;
                                });
                                navTwoItem[0].classList.add('nav-two-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                navTwoItem[0].setAttribute('data', '1');
                                hallPage = navTwoItem[0].innerHTML;
                                requestBuy(hallPage, limit);
                            }
                        };
                    });
                    navTwoNext.addEventListener('click', function() {
                        var pageActive = Number(document.querySelector('.nav-two-active').getAttribute('data-index'));
                        if (pageActive < (pageAll - 1)) {
                            initializationBuy(navTwoItem);
                            navTwoItem[pageActive + 1].classList.add('nav-two-active');
                            // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                            navTwoItem[pageActive + 1].setAttribute('data', '1');
                            hallPage = navTwoItem[pageActive + 1].innerHTML;
                            requestBuy(hallPage, limit);
                        } else {
                            var lastPage = Number(navTwoItem[navTwoItem.length - 1].innerHTML);
                            if (lastPage < pageNum) {
                                initializationBuy(navTwoItem);
                                navTwoItem.forEach(function(eles, index) {
                                    eles.innerHTML = index + lastPage - 3;
                                });
                                navTwoItem[navTwoItem.length - 1].classList.add('nav-two-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                navTwoItem[navTwoItem.length - 1].setAttribute('data', '1');
                                hallPage = navTwoItem[navTwoItem.length - 1].innerHTML;
                                requestBuy(hallPage, limit);
                            }
                        };
                    });
                } else {
                    addChildBuy(info);
                };
            };
        }
    });
    // 我的买入交易列表
    $.ajax({
        url: j_url + "/index/shop/buyNowInfoList",
        type: "POST",
        data: {
            page: buyListPage,
            limit: limitHalf
        },
        dataType: "json",
        async: true,
        crossDomain: true,
        success: function(res) {
            console.log(res);
            if (res.code == 0 && res.info) {
                var info = res.info;
                var count = res.count;
                // 封装一个添加子元素的方法，后面要多次用到
                function addChildBuyList(info) {
                    info.forEach(function(item) {
                        var status;
                        switch (item.status) {
                            case 1:
                                status = '等待匹配';
                                break;
                            case 2:
                                status = '等待付款';
                                break;
                            case 3:
                                status = '等待收款';
                                break;
                            case 4:
                                status = '交易完成';
                                break;
                            case 5:
                                status = '交易失败';
                                break;
                            case 6:
                                status = '取消匹配';
                                break;
                        }
                        // buyList.innerHTML += ``;
                        var html = '';
                        html+='<div class="buy-item">';
                            html+='<div class="buy-item-top">';
                                html+='<div class="buy-state">'+status+'</div>';
                                html+='<div class="buy-remaining-time">打款剩余时间：2小时</div>';
                            html+='</div>';
                            html+='<div class="buy-item-content">';
                                html+='<div class="buy-item-l">';
                                    html+='<div class="buy-time">'+item.matching_time+'</div>';
                                    html+='<div class="buy-num">数量：'+Number(item.num)+'</div>';
                                html+='</div>';
                                html+='<div class="buy-item-r">';
                                    html+='<div class="buy-unit-price">单价：￥'+Number(item.price)+'</div>';
                                html+='</div>';
                            html+='</div>';
                            html+='<div class="buy-item-bottom">';
                                html+='<div></div>';
                                html+='<div>';
                                    html+='<a class="details-btn" href="order_details.html?order_id='+item.id+'">详细信息</a>';
                                    html+='<a class="confirm-payment" href="confirm_payment.html?order_id='+item.id+'">确认已付款</a>';
                                html+='</div>';
                            html+='</div>';
                        html+='</div>';
                        buyList.innerHTML += html;
                    });
                };
                function initializationBuyList(arr) {
                    arr.forEach(function(eles, index) {
                        eles.classList.remove('nav-three-active');
                        eles.setAttribute('data', '0');
                        eles.setAttribute('data-index', index);
                    });
                };
                function requestBuyList(hallPage, limitHalf) {
                    $.ajax({
                        url: j_url + "/index/shop/buyNowInfoList",
                        type: "POST",
                        data: {
                            page: hallPage,
                            limit: limitHalf
                        },
                        dataType: "json",
                        async: true,
                        crossDomain: true,
                        success: function(res) {
                            console.log(res);
                            if (res.code == 0 && res.info) {
                                var info = res.info;
                                buyList.innerHTML = '';
                                info.forEach(function(item) {
                                    var status;
                                    switch (item.status) {
                                        case 1:
                                            status = '等待匹配';
                                            break;
                                        case 2:
                                            status = '等待付款';
                                            break;
                                        case 3:
                                            status = '等待收款';
                                            break;
                                        case 4:
                                            status = '交易完成';
                                            break;
                                        case 5:
                                            status = '交易失败';
                                            break;
                                        case 6:
                                            status = '取消匹配';
                                            break;
                                    }
                                    // buyList.innerHTML += ``;
                                    var html='';
                                    html+='<div class="buy-item">';
                                        html+='<div class="buy-item-top">';
                                            html+='<div class="buy-state">'+status+'</div>';
                                            html+='<div class="buy-remaining-time">打款剩余时间：2小时</div>';
                                        html+='</div>';
                                        html+='<div class="buy-item-content">';
                                            html+='<div class="buy-item-l">';
                                                html+='<div class="buy-time">'+item.matching_time+'</div>';
                                                html+='<div class="buy-num">数量：'+Number(item.num)+'</div>';
                                            html+='</div>';
                                            html+='<div class="buy-item-r">';
                                                html+='<div class="buy-unit-price">单价：￥'+Number(item.price)+'</div>';
                                            html+='</div>';
                                        html+='</div>';
                                        html+='<div class="buy-item-bottom">';
                                            html+='<div></div>';
                                            html+='<div>';
                                                html+='<a class="details-btn" href="order_details.html?order_id='+item.id+'">详细信息</a>';
                                                html+='<a class="confirm-payment" href="confirm_payment.html?order_id='+item.id+'">确认已付款</a>';
                                            html+='</div>';
                                        html+='</div>';
                                    html+='</div>';

                                    buyList.innerHTML += html;
                                });
                            };
                        }
                    });
                };
                if (count > limitHalf) {
                    navThree.style.display = 'flex';
                    var pageNum = Math.ceil(count / limitHalf);
                    addChildBuyList(info);
                    var pageAll = pageNum <= 5 ? pageNum : 5;
                    for (var i = 1; i <= pageAll; i++) {
                        navThreeContent.innerHTML += '<div class="nav-three-item" data="0">'+i+'</div>';
                    };
                    navThreeContent.children[0].classList.add('nav-three-active');
                    var navThreeItem = document.querySelectorAll('.nav-three-item');
                    navThreeItem.forEach(function(ele) {
                        ele.addEventListener('click', function() {
                            // data为0时，表示没有重复点击当前页面
                            if (ele.getAttribute('data') == 0) {
                                initializationBuyList(navThreeItem);
                                ele.classList.add('nav-three-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                ele.setAttribute('data', '1');
                                hallPage = ele.innerHTML;
                                requestBuyList(hallPage, limitHalf);
                            }
                        });
                    });
                    navThreeFirst.addEventListener('click', function() {
                        initializationBuyList(navThreeItem);
                        navThreeItem.forEach(function(eles, index) {
                            eles.innerHTML = index + 1;
                        });
                        navThreeItem[0].classList.add('nav-three-active');
                        // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                        navThreeItem[0].setAttribute('data', '1');
                        hallPage = navThreeItem[0].innerHTML;
                        requestBuyList(hallPage, limitHalf);
                    });
                    navThreeLast.addEventListener('click', function() {
                        initializationBuyList(navThreeItem);
                        if (pageNum > 5) {
                            navThreeItem.forEach(function(eles, index) {
                                eles.innerHTML = pageNum + (index - 4);
                            });
                        } else {
                            navThreeItem.forEach(function(eles, index) {
                                eles.innerHTML = index + 1;
                            });
                        };
                        navThreeItem[navThreeItem.length - 1].classList.add('nav-three-active');
                        // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                        navThreeItem[navThreeItem.length - 1].setAttribute('data', '1');
                        hallPage = pageNum;
                        requestBuyList(hallPage, limitHalf);
                    });
                    navThreePrev.addEventListener('click', function() {
                        var pageActive = Number(document.querySelector('.nav-three-active').getAttribute('data-index'));
                        if (pageActive > 0) {
                            initializationBuyList(navThreeItem);
                            navThreeItem[pageActive - 1].classList.add('nav-three-active');
                            // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                            navThreeItem[pageActive - 1].setAttribute('data', '1');
                            hallPage = navThreeItem[pageActive - 1].innerHTML;
                            requestBuyList(hallPage, limitHalf);
                        } else {
                            var firstPage = Number(navThreeItem[0].innerHTML);
                            if (firstPage > 1) {
                                initializationBuyList(navThreeItem);
                                navThreeItem.forEach(function(eles, index) {
                                    eles.innerHTML = index + firstPage - 1;
                                });
                                navThreeItem[0].classList.add('nav-three-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                navThreeItem[0].setAttribute('data', '1');
                                hallPage = navThreeItem[0].innerHTML;
                                requestBuyList(hallPage, limitHalf);
                            }
                        };
                    });
                    navThreeNext.addEventListener('click', function() {
                        var pageActive = Number(document.querySelector('.nav-three-active').getAttribute('data-index'));
                        if (pageActive < (pageAll - 1)) {
                            initializationBuyList(navThreeItem);
                            navThreeItem[pageActive + 1].classList.add('nav-three-active');
                            // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                            navThreeItem[pageActive + 1].setAttribute('data', '1');
                            hallPage = navThreeItem[pageActive + 1].innerHTML;
                            requestBuyList(hallPage, limitHalf);
                        } else {
                            var lastPage = Number(navThreeItem[navThreeItem.length - 1].innerHTML);
                            if (lastPage < pageNum) {
                                initializationBuyList(navThreeItem);
                                navThreeItem.forEach(function(eles, index) {
                                    eles.innerHTML = index + lastPage - 3;
                                });
                                navThreeItem[navThreeItem.length - 1].classList.add('nav-three-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                navThreeItem[navThreeItem.length - 1].setAttribute('data', '1');
                                hallPage = navThreeItem[navThreeItem.length - 1].innerHTML;
                                requestBuyList(hallPage, limitHalf);
                            }
                        };
                    });
                } else {
                    addChildBuyList(info);
                };
            };
        }
    });
    // 我的出售列表
    $.ajax({
        url: j_url + "/index/shop/sellInfoList",
        type: "POST",
        data: {
            page: purchasePage,
            limit: limit
        },
        dataType: "json",
        async: true,
        crossDomain: true,
        success: function(res) {
            console.log(res);
            console.log(123)
            if (res.code == 0 && res.info) {
                var info = res.info;
                var count = res.count;
                // 封装一个添加子元素的方法，后面要多次用到
                function addChildSell(info) {
                    info.forEach(function(item) {
                        var status;
                        var transaction;
                        switch (item.status) {
                            case 1:
                                status = '等待匹配';
                                transaction = '未确定';
                                break;
                            case 2:
                                status = '等待付款';
                                transaction = '未确定';
                                break;
                            case 3:
                                status = '等待收款';
                                transaction = '未确定';
                                break;
                            case 4:
                                status = '交易完成';
                                transaction = '完成';
                                break;
                            case 5:
                                status = '交易失败';
                                transaction = '未确定';
                                break;
                            case 6:
                                status = '取消匹配';
                                transaction = '未确定';
                                break;
                        }
                        // tbodyThree.innerHTML += ``;
                        var html = '';
                        html+='<tr>';
                            html+='<td><span class="purchase-time">'+item.matching_time.substr(0, 4)+item.matching_time.substr(5, 2)+item.matching_time.substr(8, 2)+'</span></td>';
                            html+='<td>'+Number(item.num)+'</td>';
                            html+='<td>'+Number(item.price)+'</td>';
                            html+='<td>'+Number(item.total)+'</td>';
                            html+='<td>'+status+'</td>';
                            html+='<td>'+transaction+'</td>';
                            html+='<td>不可操作</td>';
                        html+='</tr>';
                        tbodyThree.innerHTML += html;
                    });
                };
                function initializationSell(arr) {
                    arr.forEach(function(eles, index) {
                        eles.classList.remove('nav-four-active');
                        eles.setAttribute('data', '0');
                        eles.setAttribute('data-index', index);
                    });
                };
                function requestSell(hallPage, limit) {
                    $.ajax({
                        url: j_url + "/index/shop/sellInfoList",
                        type: "POST",
                        data: {
                            page: hallPage,
                            limit: limit
                        },
                        dataType: "json",
                        async: true,
                        crossDomain: true,
                        success: function(res) {
                            console.log(res);
                            if (res.code == 0 && res.info) {
                                var info = res.info;
                                tbodyThree.innerHTML = '';
                                info.forEach(function(item) {
                                    var status;
                                    var transaction;
                                    switch (item.status) {
                                        case 1:
                                            status = '等待匹配';
                                            transaction = '未确定';
                                            break;
                                        case 2:
                                            status = '等待付款';
                                            transaction = '未确定';
                                            break;
                                        case 3:
                                            status = '等待收款';
                                            transaction = '未确定';
                                            break;
                                        case 4:
                                            status = '交易完成';
                                            transaction = '完成';
                                            break;
                                        case 5:
                                            status = '交易失败';
                                            transaction = '未确定';
                                            break;
                                        case 6:
                                            status = '取消匹配';
                                            transaction = '未确定';
                                            break;
                                    }
                                    // tbodyThree.innerHTML += ``;
                                    var html = '';
                                    html+='<tr>';
                                        html+='<td><span class="purchase-time">'+item.matching_time.substr(0, 4)+item.matching_time.substr(5, 2)+item.matching_time.substr(8, 2)+'</span></td>';
                                        html+='<td>'+Number(item.num)+'</td>';
                                        html+='<td>'+Number(item.price)+'</td>';
                                        html+='<td>'+Number(item.total)+'</td>';
                                        html+='<td>'+status+'</td>';
                                        html+='<td>'+transaction+'</td>';
                                        html+='<td>不可操作</td>';
                                    html+='</tr>';

                                    tbodyThree.innerHTML += html;
                                });
                            };
                        }
                    });
                }
                if (count > limit) {
                    navFour.style.display = 'flex';
                    var pageNum = Math.ceil(count / limit);
                    addChildSell(info);
                    var pageAll = pageNum <= 5 ? pageNum : 5;
                    for (var i = 1; i <= pageAll; i++) {
                        navFourContent.innerHTML += '<div class="nav-four-item" data="0">'+i+'</div>';
                    };
                    navFourContent.children[0].classList.add('nav-four-active');
                    var navFourItem = document.querySelectorAll('.nav-four-item');
                    navFourItem.forEach(function(ele) {
                        ele.addEventListener('click', function() {
                            // data为0时，表示没有重复点击当前页面
                            if (ele.getAttribute('data') == 0) {
                                initializationSell(navFourItem);
                                ele.classList.add('nav-four-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                ele.setAttribute('data', '1');
                                hallPage = ele.innerHTML;
                                requestSell(hallPage, limit);
                            }
                        });
                    });
                    navFourFirst.addEventListener('click', function() {
                        initializationSell(navFourItem);
                        navFourItem.forEach(function(eles, index) {
                            eles.innerHTML = index + 1;
                        });
                        navFourItem[0].classList.add('nav-four-active');
                        // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                        navFourItem[0].setAttribute('data', '1');
                        hallPage = navFourItem[0].innerHTML;
                        requestSell(hallPage, limit);
                    });
                    navFourLast.addEventListener('click', function() {
                        initializationSell(navFourItem);
                        if (pageNum > 5) {
                            navFourItem.forEach(function(eles, index) {
                                eles.innerHTML = pageNum + (index - 4);
                            });
                        } else {
                            navFourItem.forEach(function(eles, index) {
                                eles.innerHTML = index + 1;
                            });
                        };
                        navFourItem[navFourItem.length - 1].classList.add('nav-four-active');
                        // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                        navFourItem[navFourItem.length - 1].setAttribute('data', '1');
                        hallPage = pageNum;
                        requestSell(hallPage, limit);
                    });
                    navFourPrev.addEventListener('click', function() {
                        var pageActive = Number(document.querySelector('.nav-four-active').getAttribute('data-index'));
                        if (pageActive > 0) {
                            initializationSell(navFourItem);
                            navFourItem[pageActive - 1].classList.add('nav-four-active');
                            // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                            navFourItem[pageActive - 1].setAttribute('data', '1');
                            hallPage = navFourItem[pageActive - 1].innerHTML;
                            requestSell(hallPage, limit);
                        } else {
                            var firstPage = Number(navFourItem[0].innerHTML);
                            if (firstPage > 1) {
                                initializationSell(navFourItem);
                                navFourItem.forEach(function(eles, index) {
                                    eles.innerHTML = index + firstPage - 1;
                                });
                                navFourItem[0].classList.add('nav-four-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                navFourItem[0].setAttribute('data', '1');
                                hallPage = navFourItem[0].innerHTML;
                                requestSell(hallPage, limit);
                            }
                        };
                    });
                    navFourNext.addEventListener('click', function() {
                        var pageActive = Number(document.querySelector('.nav-four-active').getAttribute('data-index'));
                        if (pageActive < (pageAll - 1)) {
                            initializationSell(navFourItem);
                            navFourItem[pageActive + 1].classList.add('nav-four-active');
                            // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                            navFourItem[pageActive + 1].setAttribute('data', '1');
                            hallPage = navFourItem[pageActive + 1].innerHTML;
                            requestSell(hallPage, limit);
                        } else {
                            var lastPage = Number(navFourItem[navFourItem.length - 1].innerHTML);
                            if (lastPage < pageNum) {
                                initializationSell(navFourItem);
                                navFourItem.forEach(function(eles, index) {
                                    eles.innerHTML = index + lastPage - 3;
                                });
                                navFourItem[navFourItem.length - 1].classList.add('nav-four-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                navFourItem[navFourItem.length - 1].setAttribute('data', '1');
                                hallPage = navFourItem[navFourItem.length - 1].innerHTML;
                                requestSell(hallPage, limit);
                            }
                        };
                    });
                } else {
                    addChildSell(info);
                };
            };
        }
    });
    // 我的出售交易列表
    $.ajax({
        url: j_url + "/index/shop/sellNowInfoList",
        type: "POST",
        data: {
            page: sellListPage,
            limit: limitHalf
        },
        dataType: "json",
        async: true,
        crossDomain: true,
        success: function(res) {
            console.log(res);
            if (res.code == 0 && res.info) {
                var info = res.info;
                var count = res.count;
                // 封装一个添加子元素的方法，后面要多次用到
                function addChildSellList(info) {
                    info.forEach(function(item) {
                        var status;
                        switch (item.status) {
                            case 1:
                                status = '等待匹配';
                                break;
                            case 2:
                                status = '等待付款';
                                break;
                            case 3:
                                status = '等待收款';
                                break;
                            case 4:
                                status = '交易完成';
                                break;
                            case 5:
                                status = '交易失败';
                                break;
                            case 6:
                                status = '取消匹配';
                                break;
                        }
                        // sellList.innerHTML += ``;
                        var html = '';
                        html+='<div class="sell-item">';
                            html+='<div class="sell-item-top">';
                                html+='<div class="sell-state">'+status+'</div>';
                                html+='<div class="sell-remaining-time">打款剩余时间：2小时</div>';
                            html+='</div>';
                            html+='<div class="sell-item-content">';
                                html+='<div class="sell-item-l">';
                                    html+='<div class="sell-time">'+item.matching_time+'</div>';
                                    html+='<div class="sell-num">数量：'+Number(item.num)+'</div>';
                                html+='</div>';
                                html+='<div class="sell-item-r">';
                                    html+='<div class="sell-unit-price">单价：￥'+Number(item.price)+'</div>';
                                html+='</div>';
                            html+='</div>';
                            html+='<div class="sell-item-bottom">';
                                html+='<a class="details-btn" href="order_details.html?order_id='+item.id+'">详细信息</a>';
                                html+='<a class="confirm-payment-btn" href="sell_order_details.html?order_id='+item.id+'">确认已打款</a>';
                            html+='</div>';
                        html+='</div>';
                        sellList.innerHTML += html;
                    });
                };
                function initializationSellList(arr) {
                    arr.forEach(function(eles, index) {
                        eles.classList.remove('nav-five-active');
                        eles.setAttribute('data', '0');
                        eles.setAttribute('data-index', index);
                    });
                };
                function requetsSellList(hallPage, limitHalf) {
                    $.ajax({
                        url: j_url + "/index/shop/sellNowInfoList",
                        type: "POST",
                        data: {
                            page: hallPage,
                            limit: limitHalf
                        },
                        dataType: "json",
                        async: true,
                        crossDomain: true,
                        success: function(res) {
                            console.log(res);
                            if (res.code == 0 && res.info) {
                                var info = res.info;
                                sellList.innerHTML = '';
                                info.forEach(function(item) {
                                    var status;
                                    switch (item.status) {
                                        case 1:
                                            status = '等待匹配';
                                            break;
                                        case 2:
                                            status = '等待付款';
                                            break;
                                        case 3:
                                            status = '等待收款';
                                            break;
                                        case 4:
                                            status = '交易完成';
                                            break;
                                        case 5:
                                            status = '交易失败';
                                            break;
                                        case 6:
                                            status = '取消匹配';
                                            break;
                                    }
                                    // sellList.innerHTML += ``;
                                    var html = '';
                                    html+='<div class="sell-item">';
                                        html+='<div class="sell-item-top">';
                                            html+='<div class="sell-state">'+status+'</div>';
                                            html+='<div class="sell-remaining-time">打款剩余时间：2小时</div>';
                                        html+='</div>';
                                        html+='<div class="sell-item-content">';
                                            html+='<div class="sell-item-l">';
                                                html+='<div class="sell-time">'+item.matching_time+'</div>';
                                                html+='<div class="sell-num">数量：'+Number(item.num)+'</div>';
                                            html+='</div>';
                                            html+='<div class="sell-item-r">';
                                                html+='<div class="sell-unit-price">单价：￥'+Number(item.price)+'</div>';
                                            html+='</div>';
                                        html+='</div>';
                                        html+='<div class="sell-item-bottom">';
                                            html+='<a class="details-btn" href="order_details.html?order_id='+item.id+'">详细信息</a>';
                                            html+='<a class="confirm-payment-btn" href="sell_order_details.html?order_id='+item.id+'">确认已打款</a>';
                                        html+='</div>';
                                    html+='</div>';

                                    sellList.innerHTML += html;
                                });
                            };
                        }
                    });
                };
                if (count > limitHalf) {
                    navFive.style.display = 'flex';
                    var pageNum = Math.ceil(count / limitHalf);
                    addChildSellList(info);
                    var pageAll = pageNum <= 5 ? pageNum : 5;
                    for (var i = 1; i <= pageAll; i++) {
                        navFiveContent.innerHTML += '<div class="nav-five-item" data="0">'+i+'</div>';
                    };
                    navFiveContent.children[0].classList.add('nav-five-active');
                    var navFiveItem = document.querySelectorAll('.nav-five-item');
                    navFiveItem.forEach(function(ele) {
                        ele.addEventListener('click', function() {
                            // data为0时，表示没有重复点击当前页面
                            if (ele.getAttribute('data') == 0) {
                                initializationSellList(navFiveItem);
                                ele.classList.add('nav-five-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                ele.setAttribute('data', '1');
                                hallPage = ele.innerHTML;
                                requetsSellList(hallPage, limitHalf);
                            }
                        });
                    });
                    navFiveFirst.addEventListener('click', function() {
                        initializationSellList(navFiveItem);
                        navFiveItem.forEach(function(eles, index) {
                            eles.innerHTML = index + 1;
                        });
                        navFiveItem[0].classList.add('nav-five-active');
                        // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                        navFiveItem[0].setAttribute('data', '1');
                        hallPage = navFiveItem[0].innerHTML;
                        requetsSellList(hallPage, limitHalf);
                    });
                    navFiveLast.addEventListener('click', function() {
                        initializationSellList(navFiveItem);
                        if (pageNum > 5) {
                            navFiveItem.forEach(function(eles, index) {
                                eles.innerHTML = pageNum + (index - 4);
                            });
                        } else {
                            navFiveItem.forEach(function(eles, index) {
                                eles.innerHTML = index + 1;
                            });
                        };
                        navFiveItem[navFiveItem.length - 1].classList.add('nav-five-active');
                        // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                        navFiveItem[navFiveItem.length - 1].setAttribute('data', '1');
                        hallPage = pageNum;
                        requetsSellList(hallPage, limitHalf);
                    });
                    navFivePrev.addEventListener('click', function() {
                        var pageActive = Number(document.querySelector('.nav-five-active').getAttribute('data-index'));
                        if (pageActive > 0) {
                            initializationSellList(navFiveItem);
                            navFiveItem[pageActive - 1].classList.add('nav-five-active');
                            // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                            navFiveItem[pageActive - 1].setAttribute('data', '1');
                            hallPage = navFiveItem[pageActive - 1].innerHTML;
                            requetsSellList(hallPage, limitHalf);
                        } else {
                            var firstPage = Number(navFiveItem[0].innerHTML);
                            if (firstPage > 1) {
                                initializationSellList(navFiveItem);
                                navFiveItem.forEach(function(eles, index) {
                                    eles.innerHTML = index + firstPage - 1;
                                });
                                navFiveItem[0].classList.add('nav-five-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                navFiveItem[0].setAttribute('data', '1');
                                hallPage = navFiveItem[0].innerHTML;
                                requetsSellList(hallPage, limitHalf);
                            }
                        };
                    });
                    navFiveNext.addEventListener('click', function() {
                        var pageActive = Number(document.querySelector('.nav-five-active').getAttribute('data-index'));
                        if (pageActive < (pageAll - 1)) {
                            initializationSellList(navFiveItem);
                            navFiveItem[pageActive + 1].classList.add('nav-five-active');
                            // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                            navFiveItem[pageActive + 1].setAttribute('data', '1');
                            hallPage = navFiveItem[pageActive + 1].innerHTML;
                            requetsSellList(hallPage, limitHalf);
                        } else {
                            var lastPage = Number(navFiveItem[navFiveItem.length - 1].innerHTML);
                            if (lastPage < pageNum) {
                                initializationSellList(navFiveItem);
                                navFiveItem.forEach(function(eles, index) {
                                    eles.innerHTML = index + lastPage - 3;
                                });
                                navFiveItem[navFiveItem.length - 1].classList.add('nav-five-active');
                                // 设置data为1，用来记录当前页面是处于被选中状态（避免重复点击时会重复请求，从而造成资源浪费）
                                navFiveItem[navFiveItem.length - 1].setAttribute('data', '1');
                                hallPage = navFiveItem[navFiveItem.length - 1].innerHTML;
                                requetsSellList(hallPage, limitHalf);
                            }
                        };
                    });
                } else {
                    addChildSellList(info);
                };
            };
        }
    });
    for (var j = 0; j < navItem.length; j++) {
        navItem[j].index=j;
        navItem[j].addEventListener('click', function() {
            for (var i = 0; i < navItem.length; i++) {
                navItem[i].classList.remove('nav-active');
                section[i].classList.remove('section-active');
            }
            this.classList.add('nav-active');
            section[this.index].classList.add('section-active');
        });
    }
    cancelPopupCancel.addEventListener('click', function() {
        cancelPopupBox.style.top = '-100%';
        setTimeout(function() {
            cancelPopupBg.style.display = 'none';
        }, 400);
    });
    cancelPopupConfirm.addEventListener('click', function() {
        $.ajax({
            url: j_url + "/index/shop/delBuy",
            type: "POST",
            data: {market_id: this.getAttribute('data')},
            dataType: "json",
            async: true,
            crossDomain: true,
            success: function(res) {
                console.log(res);
                if (res.code == 0) {
                    layer.open({
                        content: res.message,
                        skin: 'msg',
                        time: 2
                    });
                    setTimeout(function() {
                        document.location.reload();
                    }, 1500);
                } else {
                    layer.open({
                        content: res.message,
                        skin: 'msg',
                        time: 2
                    });
                }
            }
        });
    });
    purchaseChoice.addEventListener('click', function() {
        console.log(this);
        var choiceListHeight = choiceList.offsetHeight;
        choiceListBox.style.height = choiceListBox.offsetHeight > 0 ? '0px' : choiceListHeight + 'px';
        selectIcon.style.transform = choiceListBox.offsetHeight > 0 ? 'rotateZ(0deg)' : 'rotateZ(180deg)';
    });
    for (var i = 0; i < choiceItem.length; i++) {
        choiceItem[i].addEventListener('click', function() {
            choiceListBox.style.height = '0px';
            purchaseNum.innerHTML = this.innerHTML;
            purchaseNum.setAttribute('data', this.getAttribute('data'));
        });
    }
    confirmApply.addEventListener('click', function() {
        var _num = Number(purchaseNum.getAttribute('data'));
        if (_num < 1) {
            layer.open({
                content: '请选择申请数量',
                skin: 'msg',
                time: 2
            })
        } else {
            $.ajax({
                url: j_url + "/index/shop/buyNum",
                type: "POST",
                data: {
                    num: _num,
                    price: purchaseUnitPrice
                },
                dataType: "json",
                async: true,
                crossDomain: true,
                success: function(res) {
                    console.log(res);
                    applyPopupTip.innerHTML = res.message;
                    applyPopupBg.style.display = 'block';
                    setTimeout(function() {
                        applyPopupBox.style.opacity = '1';
                        applyPopupContent.style.transform = 'scale(1)';
                    }, 10);
                }
            });
        }
    });
    applyPopupBtn.addEventListener('click', function() {
        applyPopupBox.style.opacity = '0';
        setTimeout(function() {
            applyPopupBg.style.display = 'none';
            applyPopupContent.style.transform = 'scale(1.2)';
            document.location.reload();
        }, 400);
    });
    sellPopupCancel.addEventListener('click', function() {
        sellPopupBox.style.top = '-100%';
        setTimeout(function() {
            sellPopupBg.style.display = 'none';
        }, 400);
    });
    sellPopupConfirm.addEventListener('click', function() {
        sellPopupBox.style.top = '100%';
        pswBox.style.top = '0%';
        pswBox.setAttribute('data-id', sellPopupConfirm.getAttribute('data-id'));
    });
    pswCancel.addEventListener('click', function() {
        pswBox.style.top = '-100%';
        setTimeout(function() {
            sellPopupBg.style.display = 'none';
            sellPopupBox.style.top = '-100%';
        }, 400);
    });
    pswConfirm.addEventListener('click', function() {
        if (secondPsw.value == '') {
            layer.open({
                content: '二级密码不能为空',
                skin: 'msg',
                time: 2
            });
        } else if (identityNum.value == '') {
            layer.open({
                content: '身份证号不能为空',
                skin: 'msg',
                time: 2
            });
        } else {
            $.ajax({
                url: j_url + "/index/shop/shellNum",
                type: "POST",
                data: {
                    market_id: pswBox.getAttribute('data-id'),
                    trad_password: secondPsw.value,
                    card_id: identityNum.value
                },
                dataType: "json",
                async: true,
                crossDomain: true,
                success: function(res) {
                    console.log(res);
                    if (res.code == 0) {
                        layer.open({
                            content: res.message,
                            skin: 'msg',
                            time: 2
                        });
                        setTimeout(function() {
                            document.location.reload();
                        }, 1500)
                    } else {
                        layer.open({
                            content: res.message,
                            skin: 'msg',
                            time: 2
                        });
                    }
                }
            });
        };
    });
</script>
</html>